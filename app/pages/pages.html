<!-- QUVE pages : Only one hook in app for pages!! -->
<!--  link rel="import" href="quve-pages/quve-pages.html"-->
<link rel="import" href="quve-page-products/quve-page-products.html">
<link rel="import" href="quve-page-product/quve-page-product.html">

<script src="../bower_components/page/page.js"></script>
<script>

	window.addEventListener('WebComponentsReady', function() {
		
		page('#/', function() {
			app.route = 'home';
		});
		
		page('#/products', function() {
			app.route = 'products';
		});
		
		page('#/products/:id', function(ctx) {
			app.quveContext.products = ctx.params.id;
			productPage.key = ctx.params.id;
			app.route = 'product';			
		});
		
		page('#/products/:id/streams/:idStream', function(ctx) {
			app.quveContext.products = ctx.params.id;
			app.quveContext.streams = ctx.params.idStream;
			streamPage.key = ctx.params.idStream;
			app.route = 'stream';
		});
		
		page('#/products/:id/streams/:idStream/components/:idComponent', function(ctx) {
			app.quveContext.products = ctx.params.id;
			app.quveContext.streams = ctx.params.idStream;
			app.quveContext.components = ctx.params.idComponent;
			componentPage.key = ctx.params.idComponent;
			app.route = 'component';
		});

		page('#/monitor', function() {
			app.route = 'monitor';
		});

		page('#/admin', function() {
			app.route = 'admin';
		});
		
		page('#/services', function() {
			app.route = 'services';
		});
		
		// add #! before urls
		page({
			hashbang : true
		});

		page.base(document.location.pathname);
	});
</script>