<!--
  DEPENDE DE configuration.js
  var quveConfig = {"quve.frontal.api":"/icqaportal","quve.frontal.intervalupdate":"10000"};
  
  Objeto global donde se almacenan todas las URL que relacionan a QUVE con el API.
  En este objeto se carga el UUID del quveToken 
 -->

<script>
	QuveBehaviors.Api = {
	
		properties : {
			urls : {
				type: Object
			}
		},
		ready : function(){		
			this.urls = {
				session : {
					local : true,
					url : "quve/security/session"
				},
				products : {
					url : "products"
				},
				product : {
					url : "products/{0}"
				}								
			}
		},
		getUrl : function (name){
			var l = document.location;
			var api = quveConfig["quve.frontal.api"];
			var isHost = api.indexOf(".")!=-1;
			var item = this.urls[name];
			var url = l.protocol+"//"
			
			if (item)
				if (item.local){
					url += l.hostname+":"+l.port;
					url += "/"+l.pathname.split("/")[1];
				}else{
					if (!isHost)
						url += l.hostname+":"+l.port;			
					url += api;
				}
			arguments[0] = item.url;
			url += "/"+String.format.apply(this,arguments);
			return url;
		}
	};
</script>